Most fitness apps fail at scale because they treat an "exercise" as a single, static string in a massive, unmanageable database. They create a distinct row for "Dumbbell Bench Press", another for "Incline Dumbbell Bench Press", and yet another for "Single-Arm Incline Dumbbell Bench Press." This leads to exponential database bloat, impossible maintenance, and mathematically rigid, inaccurate scoring.

We don't track "exercises." We track physics, human biomechanics, and gym hardware. 

Here is your comprehensive onboarding guide to our relational architecture and JSON-based scoring system, organized by our core data modules.



---

### PART 1: THE COMPOSABILITY ARCHITECTURE
Our architecture is built on the principle of Composability. Any exercise a human can possibly perform is constructed by combining one biological movement (a Motion) with a series of physical modifiers (Delta Tables) and metadata. 

Here is how the database is structured across our 7 core modules:

#### ğŸ‹ï¸ 1. EXERCISE SETUP (Metadata & Taxonomy)
These tables don't alter the physics math; they organize the database for search, filtering, and programming logic.
* Exercise Categories: Broad buckets (e.g., Strength, Hypertrophy, Mobility).
* Cardio Types: LISS, HIIT, Sprint intervals, etc.
* Training Focus: The primary adaptation the user is chasing (e.g., Power, Endurance).

#### ğŸ’ª 2. MUSCLES & MOTIONS (The Core Engine)
This is the heart of the scoring system.
* Muscles: A hierarchical breakdown of human anatomy (e.g., Chest -> Upper Chest, Mid Chest, Lower Chest).
* Motions: The Master Table. This defines the raw, biological joint action occurring in space (e.g., PRESS_FLAT, SQUAT_REGULAR, HINGE_STD). 
  -> The Base Score: Every row in the Motions table contains a JSON object representing the base muscle activation score for that raw movement. For example, PRESS_FLAT naturally distributes points to the Mid Chest, Front Delts, and Triceps.

#### ğŸ“ 3. TRAJECTORY & POSTURE (Gravity & Vectors)
These tables define how the body sits in space and where the force is coming from. 
* Resistance Origin: Where does the force start? (e.g., BELOW for floor/gravity, HIGH for a top cable pulley).
* Motion Paths: Where do the hands travel? (e.g., HIGH_LOW for pulling down toward the waist, capturing the exact vector).
* Torso Angles: Vertical inclination defined in precise 15-degree increments (e.g., DEG_0 for flat, DEG_45 for an incline bench).
* Torso Orientations: Gravity facing direction (e.g., SUPINE for face-up on a bench, PRONE for face-down).



#### ğŸ¤² 4. UPPER BODY MECHANICS (Arm Execution)
These tables specifically track the geometry and execution of the upper limbs.
* Grips: Hand rotation (e.g., SUPINATED, PRONATED, or dynamic mid-rep twists like SUP_PRO).
* Grip Widths: Lateral hand placement (NARROW, WIDE, SHOULDER).
* Elbow Relationship: Joint tracking (e.g., FLARED outward at 90 degrees vs. TUCKED to the ribs).
* Execution Styles: Identifies anti-rotation core demands. Are the arms working together (BILATERAL), independently (UNILATERAL), or alternating (ALTERNATING)?

#### ğŸ¦µ 5. LOWER BODY MECHANICS (Base & Center of Mass)
These tables dictate leverage, hip drive, and spinal loading.
* Foot Positions: Ankle rotation and elevation (e.g., TOES_OUT, HEEL_ELEVATED).
* Stance Widths: Lateral foot placement (e.g., SHOULDER_WIDTH, WIDE for Sumo).
* Stance Types: Leg utilization (e.g., BILATERAL, STAGGERED_RFE for a Bulgarian Split Squat, SINGLE_LEG for a Pistol Squat).
* Load Placement: Where is the center of mass relative to the skeleton? (e.g., POSTERIOR_HIGH for a barbell back squat, LATERAL_HANGING for holding dumbbells at the sides, PELVIC for a belt squat).



#### âš™ï¸ 6. EXECUTION VARIABLES (Environment & Modifiers)
* Support Structures: Bracing and stability (e.g., UNSUPPORTED for standing free-weight, TORSO_BRACED for chest-supported rows).
* Loading Aids: Straps, bands, chains, or weight belts.
* Range of Motion: Tracks time-under-tension variations (FULL ROM, partial stretch, lockouts, or deficits).

#### ğŸ”§ 7. EQUIPMENT (Hardware Constraints)
* Equipment Categories: Broad types (Free Weights, Machines, Cables).
* Equipment: The specific tool used (Barbell, Dumbbell, D-Handle, Trap Bar). This operates hand-in-hand with UI logic to restrict impossible combinations (e.g., you cannot alternate a barbell).

---

### PART 2: THE JSON SCORING ENGINE (The Math)
Our scoring engine calculates the final muscle activation for a logged exercise by taking the Base Score (from MOTIONS) and dynamically adding/subtracting the math found in the `delta_rules` JSON column of the active modifier tables.

The Math in Action: The Sumo Deadlift
1. Base Motion: HINGE_STD. The base score allocates heavy baseline points to the Lower Back, Glutes, and Hamstrings.
2. Modifier 1 (Stance Widths): WIDE. The engine looks at this row's `delta_rules` and sees: `{"HINGE_STD": {"GLUTES": +0.15, "LOWER_BACK": -0.1}}`.
3. Modifier 2 (Foot Positions): TOES_OUT. The engine looks at this row's `delta_rules` and sees: `{"HINGE_STD": {"ADDUCTORS": +0.2}}`.
4. Final Calculation: The engine compiles the JSON. The math perfectly maps to reality: a Sumo Deadlift reduces lower back strain (due to a more upright Torso Angle) and drastically increases glute and adductor (inner thigh) activation compared to a conventional deadlift.

The "Home Base" Concept (`{}`)
If a user does a standard execution (e.g., Shoulder-Width grip on a Bench Press), we don't want to accidentally double-count the chest score. Therefore, `SHOULDER_WIDTH` in the Grip Widths table has an empty delta JSON: `{}`. We call this a Home Base. It simply tells the engine: "This variable is in its standard, neutral position. Just use the Base Score."

---

### PART 3: BIOMECHANICAL "DEAD ZONES" (Frontend/UI Logic)
As an engineer building the middleware or frontend, you might look at these sections and think, "We can't ask the user 15 questions every time they log a workout. It's terrible UX."

You won't have to. The architecture is designed with physical "Dead Zones." Because human anatomy is regional, certain tables have absolutely zero mathematical impact on certain exercises. Your job is to use these rules to hide irrelevant UI inputs dynamically:

1. The Upper vs. Lower Isolation Rule
If the Motions table indicates an upper-body isolation movement (like a Bicep Curl), the UI completely hides Foot Positions, Stance Widths, and Stance Types. Standing on one leg or using a Sumo stance physically does not change the isolated tension on the biceps.



2. The Gravity / Fixed Rail Rule
Gravity only pulls straight down. Therefore, if the user's Equipment is a Dumbbell or Barbell, hide the Motion Paths (High-to-Low, Low-to-High) table. You cannot perform a "High-to-Low" Dumbbell Fly. That table is only exposed when Resistance Origin and Equipment dictate manipulatable vectors (e.g., Cables or Bands).

3. The Core Support Bypass Rule
The Execution Styles table (Unilateral / Alternating) exists primarily to add "anti-rotation" bonus points to the obliques and deep core. However, if the user's Support Structure is set to TORSO_BRACED (e.g., lying face down on an incline bench for chest-supported rows), the bench is providing 100% of the core stability. The UI/engine knows to immediately skip the oblique core bonus, even if they are doing single-arm rows.

4. The Equipment Hardware Collision Rule
If a user selects "Barbell", the Execution Styles table must disable "Alternating", because a human cannot alternating-curl a single solid barbell. If Load Placement is POSTERIOR_HIGH (Back Squat), both hands are occupied, so the UI must disable secondary handheld loads.

By leveraging these logical dead zones, the UI will feel like it intimately understands kinesiologyâ€”asking the user only for the variables that actually alter the physics of their specific lift.

---
---

### PART 4: THE ADMIN WEB-APP (Data Management & Visualization Platform)

The Admin is a React + Express web application (port 3001) that serves as the command center for authoring, validating, and visualizing all of the data described in Parts 1â€“3. No row in any table is hardcodedâ€”every piece of data is managed through the Admin.

#### Tech Stack
* Frontend: React 19, TypeScript, React Router, TailwindCSS, ReactFlow
* Backend: Express.js, TypeScript
* Data Layer: JSON files on disk (atomic writes with temp + rename for safety)
* Schema: Centralized `TABLE_REGISTRY` (single source of truth for every table's fields, types, FK relationships, and JSON shapes)

#### Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ADMIN WEB-APP                                 â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              â”‚   â”‚              REACT FRONTEND                â”‚    â”‚
â”‚  â”‚   SIDEBAR    â”‚   â”‚                                           â”‚    â”‚
â”‚  â”‚              â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  Dashboard   â”‚   â”‚  â”‚  Table      â”‚  â”‚  Row Editor      â”‚    â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚  â”‚  Editor     â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚    â”‚
â”‚  â”‚  Tables:     â”‚   â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚  Field-type      â”‚    â”‚    â”‚
â”‚  â”‚  â€¢ Muscles   â”‚   â”‚  â”‚  CRUD       â”‚  â”‚  renderers:      â”‚    â”‚    â”‚
â”‚  â”‚  â€¢ Motions   â”‚   â”‚  â”‚  Search     â”‚  â”‚  â€¢ FK Dropdowns  â”‚    â”‚    â”‚
â”‚  â”‚  â€¢ Equipment â”‚   â”‚  â”‚  Filter     â”‚  â”‚  â€¢ FK[] Multi    â”‚    â”‚    â”‚
â”‚  â”‚  â€¢ Grips     â”‚   â”‚  â”‚  Sort       â”‚  â”‚  â€¢ JSON Trees    â”‚    â”‚    â”‚
â”‚  â”‚  â€¢ Stances   â”‚   â”‚  â”‚  Group      â”‚  â”‚  â€¢ Delta Rules   â”‚    â”‚    â”‚
â”‚  â”‚  â€¢ Angles    â”‚   â”‚  â”‚  Reorder    â”‚  â”‚  â€¢ Muscle Hier.  â”‚    â”‚    â”‚
â”‚  â”‚  â€¢ Paths     â”‚   â”‚  â”‚  Import     â”‚  â”‚  â€¢ Motion Config â”‚    â”‚    â”‚
â”‚  â”‚  â€¢ etc.      â”‚   â”‚  â”‚  Export     â”‚  â”‚  â€¢ Permissions   â”‚    â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚  Matrices:   â”‚   â”‚                                           â”‚    â”‚
â”‚  â”‚  â€¢ Filter    â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â€¢ Delta     â”‚   â”‚  â”‚  Filter     â”‚  â”‚  Motion Delta    â”‚    â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚  â”‚  Matrix     â”‚  â”‚  Matrix          â”‚    â”‚    â”‚
â”‚  â”‚  Graphs:     â”‚   â”‚  â”‚  â”€â”€â”€â”€â”€â”€     â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚    â”‚
â”‚  â”‚  â€¢ Relations â”‚   â”‚  â”‚  Equipment  â”‚  â”‚  17 delta tables â”‚    â”‚    â”‚
â”‚  â”‚              â”‚   â”‚  â”‚  Ã— Modifier â”‚  â”‚  Ã— all motions   â”‚    â”‚    â”‚
â”‚  â”‚              â”‚   â”‚  â”‚  checkbox   â”‚  â”‚  cross-reference  â”‚    â”‚    â”‚
â”‚  â”‚              â”‚   â”‚  â”‚  grid       â”‚  â”‚  overview         â”‚    â”‚    â”‚
â”‚  â”‚              â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚              â”‚   â”‚                                           â”‚    â”‚
â”‚  â”‚              â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚              â”‚   â”‚  â”‚  Relationship Graph (ReactFlow)    â”‚   â”‚    â”‚
â”‚  â”‚              â”‚   â”‚  â”‚  FK edges + table nodes + minimap  â”‚   â”‚    â”‚
â”‚  â”‚              â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚ HTTP                            â”‚
â”‚                                    â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      EXPRESS SERVER (:3001)                    â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ /api/tables   â”‚  â”‚ /api/schema  â”‚  â”‚ /api/schema/meta  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ CRUD + reorderâ”‚  â”‚ all schemas  â”‚  â”‚ /relationships    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ delete w/ FK  â”‚  â”‚ FK refs      â”‚  â”‚ /fk-refs          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ bulk matrix   â”‚  â”‚ validation   â”‚  â”‚                   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚         â”‚                                                     â”‚   â”‚
â”‚  â”‚         â–¼                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚  TABLE_REGISTRY (tableRegistry.ts)                    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  Central schema definitions for ALL tables:           â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  field names, types, FK refs, JSON shapes, defaults   â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                             â”‚                                 â”‚   â”‚
â”‚  â”‚                             â–¼                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚  fileOps.ts (Atomic JSON file I/O)                    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  readTable() â†’ parse JSON file                        â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  writeTable() â†’ temp file + rename (crash-safe)       â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                             â”‚                                 â”‚   â”‚
â”‚  â”‚                             â–¼                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚  /src/database/tables/*.json                          â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  22 JSON files = the entire biomechanical database    â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Core Capabilities

1. **Schema-Driven Table Management (TableEditor + RowEditor)**
   Full CRUD for every table in the system. The Admin reads the `TABLE_REGISTRY` to know every field, its type (`string`, `number`, `boolean`, `fk`, `fk[]`, `json`), and its FK reference. It dynamically renders the correct editor for each fieldâ€”dropdowns for FK fields, multi-selects for FK[] arrays, tree editors for JSON hierarchies.

2. **Specialized Field Renderers**
   The RowEditor doesn't render a generic text field for complex data. It dispatches to purpose-built editors:
   * `MuscleHierarchyField` â€” for `parent_ids` on muscle rows (multi-parent tree with inline child creation)
   * `MotionConfigTree` â€” for `muscle_targets` + `parent_id` on motions (tree view of primary â†’ variation hierarchy with scoring)
   * `DeltaRulesField` â€” for `delta_rules` JSON (motion-keyed muscle modifier editor with base-score comparison)
   * `MotionPathsField` â€” for assigning motion paths via `default_delta_configs` (family path overview with delta editing)
   * `MuscleTargetTree` â€” for `muscle_targets` scoring (primary/secondary/tertiary tree with auto-computed parent scores)
   * `ExerciseInputPermissionsField` â€” for `exercise_input_permissions` (allowed/forbidden/required per category)
   * `MatrixFieldCheckboxGrid` â€” for FK[] fields rendered as a visual grid

3. **Advanced Table Features**
   * Multi-rule filtering (equals, contains, greater_than, less_than, is_null, in, not_in)
   * Column visibility, ordering, and resizing (persisted in localStorage)
   * Drag-and-drop row reordering with automatic `sort_order` updates
   * Grouping by field (e.g., motions grouped by primary muscle, equipment grouped by category)
   * Muscle tier filtering (PRIMARY / SECONDARY / TERTIARY views)
   * Bulk import from CSV/TSV with auto-column-mapping and type coercion
   * Export to clipboard / CSV / TSV
   * Visual muscle target bars and delta rule tooltips inline in the table
   * FK-safe delete (warns about references, offers reassign or break-links)

---

### PART 5: THE FILTER MATRIX (Equipment Ã— Modifier Constraint Grid)

#### What It Is
The Filter Matrix is a cross-reference UI that defines which physical modifiers are *physically possible* for each piece of equipment. It directly manages the `modifier_constraints` JSON field on the `equipment` table.

This is a critical bridge between the Dead Zones (Part 3) and the actual data. While Part 3 describes the *rules* conceptually (e.g., "you can't alternate a barbell"), the Filter Matrix is *where those rules are actually authored and stored* as structured data.

#### The Data It Controls
Each equipment row stores a `modifier_constraints` JSON object:
```json
{
  "GRIPS":              ["PRONATED", "SUPINATED", "NEUTRAL", ...],
  "GRIP_WIDTHS":        ["NARROW", "SHOULDER", "WIDE"],
  "SUPPORT_STRUCTURES": ["UNSUPPORTED", "TORSO_BRACED", ...],
  "TORSO_ANGLES":       ["DEG_0", "DEG_15", "DEG_30", ...]
}
```
Each array lists the option IDs that are *allowed* for that equipment. A `null` key means "N/Aâ€”this modifier category doesn't apply to this equipment at all."

#### How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       FILTER MATRIX VIEW                         â”‚
â”‚                                                                  â”‚
â”‚  Tabs: [GRIPS] [GRIP_WIDTHS] [SUPPORT_STRUCTURES] [TORSO_ANGLES]â”‚
â”‚  Filter: [All] [Equipment Only] [Attachments Only]               â”‚
â”‚  View:  [Equipment â†’ Options] [Option â†’ Equipment]               â”‚
â”‚                                                                  â”‚
â”‚  Currently viewing: GRIPS tab                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Equipment \Grip  â”‚PRONA â”‚SUPIN â”‚NEUTR â”‚SEMI  â”‚MIXED â”‚ N/A â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Barbell          â”‚  â˜‘   â”‚  â˜‘   â”‚  â˜   â”‚  â˜   â”‚  â˜‘   â”‚  â˜  â”‚  â”‚
â”‚  â”‚ Dumbbell         â”‚  â˜‘   â”‚  â˜‘   â”‚  â˜‘   â”‚  â˜‘   â”‚  â˜‘   â”‚  â˜  â”‚  â”‚
â”‚  â”‚ EZ-Bar           â”‚  â˜‘   â”‚  â˜‘   â”‚  â˜   â”‚  â˜‘   â”‚  â˜   â”‚  â˜  â”‚  â”‚
â”‚  â”‚ Trap Bar         â”‚  â˜   â”‚  â˜   â”‚  â˜‘   â”‚  â˜   â”‚  â˜   â”‚  â˜  â”‚  â”‚
â”‚  â”‚ Leg Press (mach.)â”‚  â˜   â”‚  â˜   â”‚  â˜   â”‚  â˜   â”‚  â˜   â”‚  â˜‘  â”‚  â”‚
â”‚  â”‚ ...              â”‚      â”‚      â”‚      â”‚      â”‚      â”‚     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  Operations: [Select All Row] [Select All Column] [Copy From...] â”‚
â”‚              [Export CSV/TSV] [Import CSV/TSV]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Filter Matrix Flow

```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Admin loads equipment â”‚
  â”‚  table + reference     â”‚
  â”‚  tables (grips, grip   â”‚
  â”‚  widths, etc.)         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Parse each equipment  â”‚
  â”‚  row's                 â”‚
  â”‚  modifier_constraints  â”‚
  â”‚  JSON field            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Render checkbox grid: â”‚
  â”‚  rows = equipment      â”‚
  â”‚  cols = modifier opts  â”‚
  â”‚  checked = ID present  â”‚
  â”‚  in constraint array   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
     User toggles a cell
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Add/remove option ID  â”‚
  â”‚  from the constraint   â”‚
  â”‚  array for that tab    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Save via API:         â”‚
  â”‚  updateRow('equipment',â”‚
  â”‚    id,                 â”‚
  â”‚    {modifier_constraintsâ”‚
  â”‚    : updatedJSON})     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  JSON file written     â”‚
  â”‚  atomically to disk    â”‚
  â”‚  Mobile app reads this â”‚
  â”‚  to show/hide UI       â”‚
  â”‚  controls dynamically  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Capabilities
* **4 modifier categories** managed as tabs: Grips, Grip Widths, Support Structures, Torso Angles
* **Equipment vs. Option view toggle**: flip the matrix axes for different perspectives
* **Filter by equipment type**: All / Equipment Only / Attachments Only
* **Bulk operations**: select all for an entire row or column, copy one equipment's rules to another
* **Import/Export**: CSV/TSV for batch editing in spreadsheets
* **N/A checkbox**: mark an entire modifier category as non-applicable for an equipment item
* **Statistics panel**: counts of enabled cells, N/A entries, and coverage percentages

---

### PART 6: THE MOTION DELTA MATRIX (Cross-Table Delta Coverage Map)

#### What It Is
The Motion Delta Matrix is a bird's-eye view of the entire `delta_rules` system. It shows, at a glance, which motions have delta configurations across which modifier tables, revealing gaps, inheritance patterns, and coverage.

While the DeltaRulesField in the RowEditor lets you edit one table row's deltas for one motion at a time, the Motion Delta Matrix lets you see *every motion Ã— every delta table* simultaneouslyâ€”a 2D heatmap of the entire scoring system.

#### The Scope
17 tables carry `delta_rules`:

| Group                | Tables                                                    |
|----------------------|-----------------------------------------------------------|
| Trajectory & Posture | Motion Paths, Torso Angles, Torso Orientations, Resistance Origin |
| Upper Body Mechanics | Grips, Grip Widths, Elbow Relationship, Execution Styles  |
| Lower Body Mechanics | Foot Positions, Stance Widths, Stance Types, Load Placement |
| Execution Variables  | Support Structures, Loading Aids, Range of Motion          |
| Equipment            | Equipment Categories, Equipment                            |

Each of these tables has a `delta_rules` JSON column with the shape:
```json
{
  "PRESS_FLAT":  { "MID_CHEST": +0.05, "FRONT_DELT": -0.03 },
  "HINGE_STD":   "inherit",
  "SQUAT_REG":   { "QUADS": +0.10 }
}
```
Keys are motion IDs. Values are either a `Record<muscleId, deltaScore>` or the string `"inherit"` (use the parent motion's deltas).

#### How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MOTION DELTA MATRIX VIEW                               â”‚
â”‚                                                                            â”‚
â”‚             Trajectory       Upper Body    Lower Body     Exec    Equip   â”‚
â”‚            â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”   â”‚
â”‚  Motion    â”‚Pathâ”‚Ang â”‚Ori â”‚ â”‚Gripâ”‚GrWdâ”‚  â”‚Footâ”‚StWdâ”‚   â”‚Suppâ”‚  â”‚Equpâ”‚   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”¤   â”‚
â”‚  CHEST     â”‚    â”‚    â”‚    â”‚ â”‚    â”‚    â”‚  â”‚    â”‚    â”‚   â”‚    â”‚  â”‚    â”‚   â”‚
â”‚   PRESS_FL â”‚ 3  â”‚ 2  â”‚ 1  â”‚ â”‚ 4  â”‚ 2  â”‚  â”‚ â”€â”€ â”‚ â”€â”€ â”‚   â”‚ 1  â”‚  â”‚ â”€â”€ â”‚   â”‚
â”‚   PRESS_IN â”‚ 3i â”‚ 2  â”‚ 1i â”‚ â”‚ 4i â”‚ 2i â”‚  â”‚ â”€â”€ â”‚ â”€â”€ â”‚   â”‚ 1i â”‚  â”‚ â”€â”€ â”‚   â”‚
â”‚   FLY_FLAT â”‚ 2  â”‚ 1  â”‚ â”€â”€ â”‚ â”‚ 3  â”‚ â”€â”€ â”‚  â”‚ â”€â”€ â”‚ â”€â”€ â”‚   â”‚ 1  â”‚  â”‚ â”€â”€ â”‚   â”‚
â”‚  BACK      â”‚    â”‚    â”‚    â”‚ â”‚    â”‚    â”‚  â”‚    â”‚    â”‚   â”‚    â”‚  â”‚    â”‚   â”‚
â”‚   ROW_STD  â”‚ 2  â”‚ 3  â”‚ 1  â”‚ â”‚ 4  â”‚ 3  â”‚  â”‚ â”€â”€ â”‚ â”€â”€ â”‚   â”‚ 2  â”‚  â”‚ 1  â”‚   â”‚
â”‚   PULLDOWN â”‚ 3  â”‚ â”€â”€ â”‚ â”€â”€ â”‚ â”‚ 4  â”‚ 3  â”‚  â”‚ â”€â”€ â”‚ â”€â”€ â”‚   â”‚ â”€â”€ â”‚  â”‚ â”€â”€ â”‚   â”‚
â”‚  LEGS      â”‚    â”‚    â”‚    â”‚ â”‚    â”‚    â”‚  â”‚    â”‚    â”‚   â”‚    â”‚  â”‚    â”‚   â”‚
â”‚   SQUAT_RG â”‚ â”€â”€ â”‚ 1  â”‚ â”€â”€ â”‚ â”‚ â”€â”€ â”‚ â”€â”€ â”‚  â”‚ 3  â”‚ 2  â”‚   â”‚ 1  â”‚  â”‚ 1  â”‚   â”‚
â”‚   HINGE_ST â”‚ â”€â”€ â”‚ 2  â”‚ â”€â”€ â”‚ â”‚ â”€â”€ â”‚ â”€â”€ â”‚  â”‚ 2  â”‚ 3  â”‚   â”‚ 1  â”‚  â”‚ 2  â”‚   â”‚
â”‚  ...       â”‚    â”‚    â”‚    â”‚ â”‚    â”‚    â”‚  â”‚    â”‚    â”‚   â”‚    â”‚  â”‚    â”‚   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                            â”‚
â”‚  Legend: [N] = N rows configured  [Ni] = N rows, some inherit             â”‚
â”‚          [â”€â”€] = empty / not applicable                                     â”‚
â”‚                                                                            â”‚
â”‚  Click any motion row â†’ opens SIDE PANEL with full delta detail            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Motion Delta Matrix Flow

```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Load all motions,       â”‚
  â”‚  muscles, and all 17     â”‚
  â”‚  delta tables from API   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Group motions by their  â”‚
  â”‚  primary muscle target   â”‚
  â”‚  (Chest, Back, Legs...)  â”‚
  â”‚  Then by parent â†’ child  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  For each motion, scan   â”‚
  â”‚  all 17 tables' rows     â”‚
  â”‚  for delta_rules[motion] â”‚
  â”‚                          â”‚
  â”‚  Count: how many rows    â”‚
  â”‚  have rules?  inherit?   â”‚
  â”‚  empty?                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Render matrix:          â”‚
  â”‚  Rows = motions (grouped)â”‚
  â”‚  Cols = 17 delta tables  â”‚
  â”‚  Cells = coverage counts â”‚
  â”‚  Color: blue=configured  â”‚
  â”‚         green=inherit    â”‚
  â”‚         red=empty        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
     User clicks a motion
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  SIDE PANEL opens:       â”‚
  â”‚  Lists every delta table â”‚
  â”‚  Shows all rows in that  â”‚
  â”‚  table that reference    â”‚
  â”‚  this motion             â”‚
  â”‚                          â”‚
  â”‚  Expandable cards per    â”‚
  â”‚  table row with inline   â”‚
  â”‚  delta editor            â”‚
  â”‚                          â”‚
  â”‚  Add/remove delta rules  â”‚
  â”‚  Toggle inherit          â”‚
  â”‚  Compare vs base scores  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Save via API:           â”‚
  â”‚  updateRow(tableKey,     â”‚
  â”‚    rowId,                â”‚
  â”‚    {delta_rules: ...})   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Capabilities
* **Heatmap overview**: instantly see which motions are well-configured vs. which have gaps
* **Three cell states**: Configured (blue) / Inherit (green) / Empty (red)
* **Hover tooltips**: preview delta relationships without opening the side panel
* **Side panel editor**: full delta editing for a selected motion across all 17 tables at once
* **Inheritance visualization**: see which child motions inherit from their parent vs. have custom overrides
* **Hierarchical muscle tree editor**: when editing deltas, muscles are grouped by primary â†’ secondary â†’ tertiary with auto-computed parent scores
* **Base score comparison**: side-by-side view of a motion's base `muscle_targets` vs. the delta being applied
* **Motion path family reassignment**: reassign motion paths across sibling motions from the panel
* **Export/Import**: CSV/TSV for the full matrix

---

### PART 7: THE RELATIONSHIP GRAPH (FK Dependency Visualization)

#### What It Is
The Relationship Graph is an interactive, force-directed graph (built with ReactFlow) that visualizes every foreign key relationship between every table in the system. It answers: "How do these 22+ tables actually connect to each other?"

#### How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RELATIONSHIP GRAPH VIEW                       â”‚
â”‚                                                                 â”‚
â”‚  Filters: [All] [Muscles] [Equipment] [Motions] [Grips&Stance] â”‚
â”‚  Options: [â˜‘ Show Edge Labels] [â˜ Filter by Table: ____]       â”‚
â”‚                                                                 â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚      â”‚ MUSCLES  â”‚ â—„â”€â”€â”€â”€â”€  â”‚ MOTIONS  â”‚                          â”‚
â”‚      â”‚ (Group)  â”‚ muscle  â”‚ (Group)  â”‚                          â”‚
â”‚      â”‚ 45 rows  â”‚ targets â”‚ 28 rows  â”‚                          â”‚
â”‚      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”˜                          â”‚
â”‚           â”‚ parent_ids       â”‚   â”‚ parent_id                    â”‚
â”‚           â–¼                  â”‚   â–¼                              â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚      â”‚ MUSCLES  â”‚            â”‚ â”‚ MOTION   â”‚                     â”‚
â”‚      â”‚ (self-   â”‚            â”‚ â”‚ PATHS    â”‚                     â”‚
â”‚      â”‚  ref)    â”‚            â”‚ â”‚ 12 rows  â”‚                     â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                              â”‚                                  â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚           â–¼                                                     â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚      â”‚ GRIPS    â”‚         â”‚ EQUIPMENTâ”‚                           â”‚
â”‚      â”‚ 15 rows  â”‚         â”‚ 80 rows  â”‚                          â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ Node Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Table: motions                         â”‚                    â”‚
â”‚  â”‚  Group: Motions        Rows: 28         â”‚                    â”‚
â”‚  â”‚  Incoming FK refs: 5   Outgoing: 2      â”‚                    â”‚
â”‚  â”‚  Click â†’ navigate to Table Editor       â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                 â”‚
â”‚  [MiniMap in corner]                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### How the Graph Is Generated

```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Server reads            â”‚
  â”‚  TABLE_REGISTRY          â”‚
  â”‚  (all schemas)           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  For each table, scan    â”‚
  â”‚  fields for type='fk'    â”‚
  â”‚  and type='fk[]'         â”‚
  â”‚                          â”‚
  â”‚  Build:                  â”‚
  â”‚  â€¢ Nodes (table key,     â”‚
  â”‚    group, row count)     â”‚
  â”‚  â€¢ Edges (source table   â”‚
  â”‚    â†’ target table,       â”‚
  â”‚    field name, animated  â”‚
  â”‚    if fk[])              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Client receives via     â”‚
  â”‚  GET /api/schema/meta/   â”‚
  â”‚  relationships           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ReactFlow renders:      â”‚
  â”‚  â€¢ Color-coded nodes     â”‚
  â”‚    by group              â”‚
  â”‚  â€¢ Labeled edges         â”‚
  â”‚  â€¢ Animated edges for    â”‚
  â”‚    fk[] (many-to-many)   â”‚
  â”‚  â€¢ Auto-layout by group  â”‚
  â”‚  â€¢ MiniMap + Controls    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Capabilities
* **Color-coded groups**: Muscles (amber), Equipment (blue), Motions (green), Grips & Stance (purple), Exercise Setup (red)
* **Node metadata**: row count, incoming FK count, outgoing FK count
* **Edge labels**: the FK field name on each edge (toggleable)
* **Animated edges**: fk[] (array) relationships pulsate to distinguish one-to-many from many-to-many
* **Click-to-navigate**: clicking a node navigates directly to that table's editor
* **Filter by group or table**: isolate specific regions of the graph
* **MiniMap**: always-visible overview for orientation in complex graphs
* **Auto-layout**: nodes arranged by group for readability

---

### PART 8: HOW EVERYTHING CONNECTS (The Full Pipeline)

#### System Interconnection Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         THE FULL DATA PIPELINE                          â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    ADMIN WEB-APP (authoring)                       â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚   TABLE EDITOR â”€â”€â”€â”€ RowEditor â”€â”€â”€â”€ Field Renderers                â”‚  â”‚
â”‚  â”‚      â”‚                  â”‚              â”‚                          â”‚  â”‚
â”‚  â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚      â”‚    â”‚             â”‚              â”‚                   â”‚      â”‚  â”‚
â”‚  â”‚      â–¼    â–¼             â–¼              â–¼                   â–¼      â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚   â”‚ MUSCLES  â”‚  â”‚  MOTIONS   â”‚  â”‚  17 MODIFIER â”‚  â”‚EQUIPMENT â”‚  â”‚  â”‚
â”‚  â”‚   â”‚ hierarchyâ”‚  â”‚  base      â”‚  â”‚  TABLES      â”‚  â”‚ + constr.â”‚  â”‚  â”‚
â”‚  â”‚   â”‚ .json    â”‚  â”‚  scores    â”‚  â”‚  delta_rules â”‚  â”‚ .json    â”‚  â”‚  â”‚
â”‚  â”‚   â”‚          â”‚  â”‚  .json     â”‚  â”‚  .json       â”‚  â”‚          â”‚  â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚        â”‚               â”‚               â”‚               â”‚        â”‚  â”‚
â”‚  â”‚        â”‚    FILTER MATRIX edits â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â”‚        â”‚    modifier_constraints        â”‚                        â”‚  â”‚
â”‚  â”‚        â”‚               â”‚               â”‚                        â”‚  â”‚
â”‚  â”‚        â”‚    MOTION DELTA MATRIX â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â”‚        â”‚    edits delta_rules across all tables                  â”‚  â”‚
â”‚  â”‚        â”‚                                                        â”‚  â”‚
â”‚  â”‚        â”‚    RELATIONSHIP GRAPH                                  â”‚  â”‚
â”‚  â”‚        â”‚    visualizes FK connections between all tables         â”‚  â”‚
â”‚  â”‚        â”‚                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                                                           â”‚
â”‚           â–¼  All JSON files are the single source of truth            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    22 JSON FILES ON DISK                          â”‚â”‚
â”‚  â”‚  muscleGroups.json, primaryMuscles.json, secondaryMuscles.json,  â”‚â”‚
â”‚  â”‚  tertiaryMuscles.json, motionPlanes.json, primaryMotions.json,   â”‚â”‚
â”‚  â”‚  primaryMotionVariations.json, motionPaths.json,                 â”‚â”‚
â”‚  â”‚  torsoAngles.json, torsoOrientations.json, resistanceOrigin.json,â”‚â”‚
â”‚  â”‚  grips.json, gripWidths.json, rotatingGripVariations.json,       â”‚â”‚
â”‚  â”‚  stanceTypes.json, stanceWidths.json, exerciseCategories.json,   â”‚â”‚
â”‚  â”‚  cardioTypes.json, trainingFocus.json, gymEquipment.json,        â”‚â”‚
â”‚  â”‚  equipmentCategories.json, cableAttachments.json                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚                                     â”‚
â”‚                                 â”‚  Shared between admin & mobile app  â”‚
â”‚                                 â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚               REACT NATIVE MOBILE APP (consumption)              â”‚â”‚
â”‚  â”‚                                                                   â”‚â”‚
â”‚  â”‚  initDatabase.ts reads JSON files â†’ seeds SQLite                  â”‚â”‚
â”‚  â”‚  exerciseConfigService.ts queries SQLite                          â”‚â”‚
â”‚  â”‚  useExerciseConfig.ts React hooks serve data to UI                â”‚â”‚
â”‚  â”‚                                                                   â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚ Exercise    â”‚    â”‚  Scoring     â”‚    â”‚  Dynamic UI        â”‚   â”‚â”‚
â”‚  â”‚  â”‚ Creation    â”‚    â”‚  Engine      â”‚    â”‚  (Dead Zone logic) â”‚   â”‚â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚â”‚
â”‚  â”‚  â”‚ User picks  â”‚    â”‚  base score  â”‚    â”‚  Reads             â”‚   â”‚â”‚
â”‚  â”‚  â”‚ motion +    â”‚â”€â”€â”€â–ºâ”‚  + Î£ deltas  â”‚    â”‚  modifier_constr.  â”‚   â”‚â”‚
â”‚  â”‚  â”‚ modifiers   â”‚    â”‚  = final     â”‚    â”‚  to show/hide      â”‚   â”‚â”‚
â”‚  â”‚  â”‚             â”‚    â”‚  activation  â”‚    â”‚  inputs per equip  â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### The Scoring Calculation Pipeline

```
  USER LOGS AN EXERCISE
  (selects: Motion, Equipment, Grip, Stance, Angle, etc.)
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  1. LOOK UP BASE SCORE       â”‚
  â”‚                              â”‚
  â”‚  Motion = PRESS_INCLINE      â”‚
  â”‚  muscle_targets = {          â”‚
  â”‚    UPPER_CHEST: 0.35,        â”‚
  â”‚    MID_CHEST:   0.20,        â”‚
  â”‚    FRONT_DELT:  0.25,        â”‚
  â”‚    TRICEPS:     0.20         â”‚
  â”‚  }                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  2. COLLECT APPLICABLE       â”‚
  â”‚     DELTA RULES              â”‚
  â”‚                              â”‚
  â”‚  For each selected modifier: â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ Grip: WIDE             â”‚  â”‚
  â”‚  â”‚ delta_rules = {        â”‚  â”‚
  â”‚  â”‚   PRESS_INCLINE: {     â”‚  â”‚
  â”‚  â”‚     UPPER_CHEST: +0.05 â”‚  â”‚
  â”‚  â”‚   }                    â”‚  â”‚
  â”‚  â”‚ }                      â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ Torso Angle: DEG_45    â”‚  â”‚
  â”‚  â”‚ delta_rules = {        â”‚  â”‚
  â”‚  â”‚   PRESS_INCLINE: {     â”‚  â”‚
  â”‚  â”‚     UPPER_CHEST: +0.10,â”‚  â”‚
  â”‚  â”‚     MID_CHEST:   -0.10 â”‚  â”‚
  â”‚  â”‚   }                    â”‚  â”‚
  â”‚  â”‚ }                      â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ Execution: BILATERAL   â”‚  â”‚
  â”‚  â”‚ delta_rules = {}       â”‚  â”‚
  â”‚  â”‚ (Home Base â€” no delta) â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  3. SUM ALL DELTAS           â”‚
  â”‚                              â”‚
  â”‚  UPPER_CHEST: +0.05 + +0.10 â”‚
  â”‚             = +0.15          â”‚
  â”‚  MID_CHEST:  -0.10           â”‚
  â”‚                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  4. COMPUTE FINAL SCORES     â”‚
  â”‚                              â”‚
  â”‚  UPPER_CHEST: 0.35 + 0.15   â”‚
  â”‚             = 0.50           â”‚
  â”‚  MID_CHEST:   0.20 - 0.10   â”‚
  â”‚             = 0.10           â”‚
  â”‚  FRONT_DELT:  0.25 (no Î”)   â”‚
  â”‚             = 0.25           â”‚
  â”‚  TRICEPS:     0.20 (no Î”)   â”‚
  â”‚             = 0.20           â”‚
  â”‚                              â”‚
  â”‚  Total activation map now    â”‚
  â”‚  reflects the actual physics â”‚
  â”‚  of a Wide-Grip Incline      â”‚
  â”‚  Bench Press                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### The Inheritance Chain

```
  PARENT MOTION: PRESS_FLAT
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  muscle_targets = {          â”‚
  â”‚    MID_CHEST:  0.35,         â”‚
  â”‚    FRONT_DELT: 0.30,         â”‚
  â”‚    TRICEPS:    0.25,         â”‚
  â”‚    UPPER_CHEST: 0.10         â”‚
  â”‚  }                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ parent_id FK
             â”‚
  CHILD MOTION: PRESS_INCLINE
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  muscle_targets = {          â”‚
  â”‚    UPPER_CHEST: 0.35,  â—„â”€â”€ overrides parent                     
  â”‚    MID_CHEST:   0.20,  â—„â”€â”€ overrides parent                     
  â”‚    FRONT_DELT:  0.25,                                            
  â”‚    TRICEPS:     0.20                                             
  â”‚  }                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  When a modifier table row has:
  delta_rules: { "PRESS_INCLINE": "inherit" }

  The engine resolves this to:
  â†’ Use PRESS_FLAT's delta values for this modifier
  â†’ Child gets parent's physics adjustments for free
  â†’ Admin shows "inherit" as green in the Motion Delta Matrix
```

#### Table-to-Tool Mapping

| Admin Tool             | Tables It Reads            | Tables It Writes                  | JSON Fields Managed            |
|------------------------|---------------------------|-----------------------------------|--------------------------------|
| Table Editor           | All 22 tables             | All 22 tables                     | All fields (via RowEditor)     |
| Row Editor             | FK reference tables       | Target table row                  | All field types                |
| Filter Matrix          | equipment, grips, gripWidths, supportStructures, torsoAngles | equipment | `modifier_constraints`  |
| Motion Delta Matrix    | motions, muscles, + 17 delta tables | Any of the 17 delta tables  | `delta_rules`           |
| Relationship Graph     | TABLE_REGISTRY schemas    | None (read-only visualization)    | N/A                            |
| MuscleHierarchyField   | muscles (all tiers)       | muscles (target row)              | `parent_ids`                   |
| MotionConfigTree       | motions, muscles          | motions (target row)              | `muscle_targets`, `parent_id`  |
| DeltaRulesField        | motions, muscles          | target delta table row            | `delta_rules`                  |
| MotionPathsField       | motions, motionPaths      | motions, motionPaths              | `default_delta_configs`, `delta_rules` |

---

### PART 9: ADMIN SERVER INTERNALS (Express API & Data Integrity)

#### API Route Map

```
  EXPRESS SERVER (:3001)
  â”‚
  â”œâ”€â”€ /api/tables
  â”‚   â”œâ”€â”€ GET    /:key              â†’ Read all rows from table
  â”‚   â”œâ”€â”€ POST   /:key              â†’ Add new row (auto-generates ID)
  â”‚   â”œâ”€â”€ PUT    /:key/:id          â†’ Update existing row
  â”‚   â”œâ”€â”€ DELETE /:key/:id          â†’ Delete row (with FK cleanup)
  â”‚   â”œâ”€â”€ PUT    /:key/reorder      â†’ Update sort_order for all rows
  â”‚   â””â”€â”€ PUT    /:key/bulk-matrix  â†’ Batch update (Filter Matrix saves)
  â”‚
  â”œâ”€â”€ /api/schema
  â”‚   â”œâ”€â”€ GET    /                  â†’ All table schemas from TABLE_REGISTRY
  â”‚   â””â”€â”€ POST   /:key/validate    â†’ Validate a row against schema rules
  â”‚
  â””â”€â”€ /api/schema/meta
      â”œâ”€â”€ GET    /relationships     â†’ FK graph (nodes + edges)
      â””â”€â”€ GET    /fk-refs/:key/:id â†’ Find all rows referencing this ID
```

#### Data Integrity on Delete

```
  User clicks DELETE on a row
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Server scans TABLE_REGISTRY â”‚
  â”‚  for all FK fields pointing  â”‚
  â”‚  at the target table         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Finds all rows across all   â”‚
  â”‚  tables that reference the   â”‚
  â”‚  row being deleted           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
        â”‚         â”‚
   Has refs?   No refs
        â”‚         â”‚
        â–¼         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Warn user â”‚  â”‚ Delete row  â”‚
  â”‚ Show list â”‚  â”‚ immediately â”‚
  â”‚ of refs   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚           â”‚
  â”‚ Options:  â”‚
  â”‚ â€¢ Break   â”‚ â† set FK fields to null
  â”‚   links   â”‚
  â”‚ â€¢ Reassignâ”‚ â† point refs to another row
  â”‚ â€¢ Cancel  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### File I/O Safety (fileOps.ts)

```
  Write request arrives
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Serialize data to JSON   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Write to TEMP file       â”‚
  â”‚  (.tmp extension)         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Atomic rename:           â”‚
  â”‚  temp.tmp â†’ actual.json   â”‚
  â”‚  (if crash mid-write,     â”‚
  â”‚   original file intact)   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Windows file-lock retry  â”‚
  â”‚  logic (handles OS locks) â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### PART 10: SUMMARY â€” THE COMPLETE SYSTEM MAP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                        ADMIN WEB-APP                                  â”‚       â”‚
â”‚  â”‚                                                                      â”‚       â”‚
â”‚  â”‚  Authoring Layer:                                                    â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ Table      â”‚ â”‚ Filter      â”‚ â”‚ Motion Delta â”‚ â”‚ Relationship â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ Editor     â”‚ â”‚ Matrix      â”‚ â”‚ Matrix       â”‚ â”‚ Graph        â”‚   â”‚       â”‚
â”‚  â”‚  â”‚            â”‚ â”‚             â”‚ â”‚              â”‚ â”‚              â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ CRUD all   â”‚ â”‚ Equipment Ã— â”‚ â”‚ Motions Ã—   â”‚ â”‚ FK edges     â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ 22 tables  â”‚ â”‚ Modifier    â”‚ â”‚ 17 delta    â”‚ â”‚ between all  â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ + special  â”‚ â”‚ checkboxes  â”‚ â”‚ tables      â”‚ â”‚ tables       â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ renderers  â”‚ â”‚             â”‚ â”‚ heatmap     â”‚ â”‚ (read-only)  â”‚   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â”‚        â”‚               â”‚               â”‚                            â”‚       â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚       â”‚
â”‚  â”‚                        â”‚                                            â”‚       â”‚
â”‚  â”‚                        â–¼                                            â”‚       â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚       â”‚
â”‚  â”‚              â”‚  22 JSON FILES   â”‚                                   â”‚       â”‚
â”‚  â”‚              â”‚  (source of      â”‚                                   â”‚       â”‚
â”‚  â”‚              â”‚   truth)         â”‚                                   â”‚       â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                          â”‚                                                     â”‚
â”‚                          â”‚  Shared data files                                  â”‚
â”‚                          â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                       â–¼               MOBILE APP                    â”‚       â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚       â”‚
â”‚  â”‚              â”‚  SQLite DB       â”‚                                   â”‚       â”‚
â”‚  â”‚              â”‚  (seeded from    â”‚                                   â”‚       â”‚
â”‚  â”‚              â”‚   JSON on load)  â”‚                                   â”‚       â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚       â”‚
â”‚  â”‚                       â”‚                                             â”‚       â”‚
â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚       â”‚
â”‚  â”‚          â–¼            â–¼            â–¼                                â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚       â”‚
â”‚  â”‚  â”‚ Exercise   â”‚ â”‚ Scoring  â”‚ â”‚ Dynamic UI   â”‚                      â”‚       â”‚
â”‚  â”‚  â”‚ Config     â”‚ â”‚ Engine   â”‚ â”‚ (show/hide   â”‚                      â”‚       â”‚
â”‚  â”‚  â”‚ Hooks      â”‚ â”‚ (base +  â”‚ â”‚  based on    â”‚                      â”‚       â”‚
â”‚  â”‚  â”‚ (query     â”‚ â”‚  Î£ delta â”‚ â”‚  modifier_   â”‚                      â”‚       â”‚
â”‚  â”‚  â”‚  SQLite)   â”‚ â”‚  rules)  â”‚ â”‚  constraints â”‚                      â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  + dead zone â”‚                      â”‚       â”‚
â”‚  â”‚                              â”‚  rules)      â”‚                      â”‚       â”‚
â”‚  â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                                â”‚
â”‚  KEY RELATIONSHIPS:                                                            â”‚
â”‚  â€¢ Muscles â†â†’ Motions (muscle_targets JSON + parent hierarchies)               â”‚
â”‚  â€¢ Motions â†â†’ Motion Paths (default_delta_configs + delta_rules)               â”‚
â”‚  â€¢ Equipment â†â†’ Modifiers (modifier_constraints via Filter Matrix)             â”‚
â”‚  â€¢ All 17 modifier tables â†’ Motions (delta_rules keyed by motion ID)           â”‚
â”‚  â€¢ Muscles â†â†’ Muscles (parent_ids for hierarchy: primary/secondary/tertiary)   â”‚
â”‚  â€¢ Motions â†â†’ Motions (parent_id for variation hierarchy)                      â”‚
â”‚                                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This system means that every possible exercise a human can perform is not a row in a databaseâ€”it is a *computation*. The Admin authors the physics. The mobile app computes the result. No exercise is ever "missing" from the database because the answer is always derivable from the composable architecture.
